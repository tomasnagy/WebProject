function animateAllTheThings(e){"use strict";function n(){var e=t.length-1;for(e;e>=0;e--)t[e].reset(),console.log("RESET"),t[e].calculateAnimations();o=!1}var t=[],i=e.length-1,o=!1;for(i;i>=0;i--){var s=new HistoryAnimationItem(i,e);s.loadImages(),t.push(s)}window.addEventListener("resize",function(){if(!o){var e=t.length-1;for(e;e>=0;e--){var n=t[e];n.IsOpen&&t[e].closeItem()}o=!0}}),window.resizeStop.bind(n),window.resizeStop.setThreshold(200)}
!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();
!function(){"use strict";angular.module("app",[])}();
!function(n,e,t){function i(){var n=t.now();if(f>n-r)u=e(i,10);else{clearTimeout(u),u=r=0;for(var s=0,c=o.length;c>s;s++)o[s]()}}var o=[],r=0,u=0,f=500;n.addEventListener("resize",function(){r=t.now(),u=u||e(i,10)},!1),n.resizeStop={setThreshold:function(n){return"number"==typeof n&&n>-1&&!isNaN(n)&&isFinite(n)?(f=n,n):!1},bind:function(n){return"function"==typeof n?(o.push(n),o.length-1):!1},unbind:function(n){var e="number"==typeof n?n:o.indexOf(n);return e>-1&&o.splice(n,1),e>-1}}}(window,setTimeout,Date);
var HistoryAnimationItem=function(t,e){"use strict";this.index=t,this.data=e,this.year=document.querySelectorAll(".year")[t],this.guitarItem=document.getElementsByTagName("section")[t],this.fullHeight=0,this.smallHeight=0,this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.tl1=new TimelineMax({paused:"true"}),this.tl2=new TimelineMax({paused:"true"}),this.tl3=new TimelineMax({paused:"true"}),this.tl4=new TimelineMax({paused:"true"}),this.isOpen=!1};HistoryAnimationItem.prototype={get IsOpen(){return this.isOpen},loadImages:function(){console.log("RECALC");var t=this;t.guitarItem.children[2].src=t.data[t.index].Image,t.guitarItem.children[2].addEventListener("load",function(){t.calculateAnimations()},!1)},calculateAnimations:function(){var t=this;for(this.fullHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.i;this.i>=0;this.i--)this.extraData[this.i].className="fullyhidden";for(this.smallHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.j;this.j>=0;this.j--)this.mainData[this.j].className="hidden";this.guitarItem.className="closedItem",this.tl1.to(this.guitarItem,.4,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"show"}),this.tl2.to(this.guitarItem,.4,{height:this.fullHeight}).to(this.extraData,0,{className:"block"}).to(this.extraData,.2,{className:"fullshow"}),this.tl3.to(this.extraData,.2,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,.2,{height:this.smallHeight}).to(this.guitarItem,0,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"hidden"}).to(this.guitarItem,.5,{className:"closedItem"}),this.tl4.to([this.mainData,this.extraData],.1,{className:"hidden"}).to(this.guitarItem,.1,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,0,{height:this.smallHeight});var e=new CustomEvent("closeItems",{detail:{source:this.index},bubbles:!0,cancelable:!0});document.addEventListener("closeItems",function(e){e.detail.source!==t.index&&t.isOpen&&(t.tl4.play(0),t.year.className="",t.isOpen=!1)},!1),this.year.addEventListener("mouseenter",function(){t.isOpen||t.tl1.play(0)}),this.year.addEventListener("mouseleave",function(){t.isOpen||t.tl1.reverse()}),this.year.addEventListener("click",function(i){i.target.className="active",console.log(t.isOpen),t.isOpen=!0,t.tl2.play(0),i.target.dispatchEvent(e)})},closeItem:function(){console.log("CLOSE"),this.isOpen=!1,this.tl4.play(0)},reset:function(){var t,e,i=this.guitarItem.children.length-1;for(this.tl1.invalidate(),this.tl2.invalidate(),this.tl3.invalidate(),this.tl4.invalidate(),this.tl1.pause(0,!0),this.tl2.pause(0,!0),this.tl3.pause(0,!0),this.tl4.pause(0,!0),this.tl1.kill(),this.tl2.kill(),this.tl3.kill(),this.tl4.kill(),this.tl1=null,this.tl2=null,this.tl3=null,this.tl4=null,this.tl1=new TimelineMax({paused:"true"}),this.tl2=new TimelineMax({paused:"true"}),this.tl3=new TimelineMax({paused:"true"}),this.tl4=new TimelineMax({paused:"true"}),this.fullHeight=0,this.smallHeight=0,this.guitarItem.removeAttribute("class"),this.guitarItem.removeAttribute("style"),t=this.guitarItem.cloneNode(!0),this.guitarItem.parentNode.replaceChild(t,this.guitarItem),this.guitarItem=t,t=this.year.cloneNode(!0),this.year.parentNode.replaceChild(t,this.year),this.year=t,i;i>=0;i--)e=this.guitarItem.children[i],e.removeAttribute("class"),e.removeAttribute("style"),t=e.cloneNode(!0),e.parentNode.replaceChild(t,e);this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.isOpen=!1,this.year.className=""}};
!function(){"use strict";var t=function(t,n,i){t.items=[],t.layoutDone=function(){i(function(){animateAllTheThings(t.items)},0)};var o=function(n){angular.forEach(n.data,function(n){var i=new GuitarHistoryItem(n.title,n.date,n.description,n.image,n.interactiveGuitarName);t.items.push(i)})},a=function(t){console.log(t)};n.get("http://"+window.location.hostname+":3000/api/allData").then(o,a)},n=angular.module("app");n.controller("HistoryItemController",["$scope","$http","$timeout",t])}();
!function(){"use strict";var e=angular.module("app");e.directive("repeatDone",function(){return function(e,n,t){e.$last&&e.$eval(t.repeatDone)}})}();
var GuitarHistoryItem=function(t,e,i,r,n){this.title=t,this.date=e,this.year=e.split(" ")[2],this.description=i,this.image=r,this.interactiveGuitarName=n};GuitarHistoryItem.prototype={get Title(){return this.title},get Date(){return this.date},get Year(){return this.year},get Description(){return this.description},get Image(){return this.image},get InteractiveGuitarName(){return this.interactiveGuitarName}};