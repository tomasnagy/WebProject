function animateAllTheThings(e){"use strict";function n(){var e=t.length-1;for(e;e>=0;e--)t[e].reset(),console.log("RESET"),t[e].calculateAnimations();o=!1}var t=[],i=e.length-1,o=!1;for(i;i>=0;i--){var s=new HistoryAnimationItem(i,e);s.loadImages(),t.push(s)}window.addEventListener("resize",function(){if(!o){var e=t.length-1;for(e;e>=0;e--){var n=t[e];n.IsOpen&&t[e].closeItem()}o=!0}}),window.resizeStop.bind(n),window.resizeStop.setThreshold(200)}
!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();
!function(n,e,t){function i(){var n=t.now();if(f>n-r)u=e(i,10);else{clearTimeout(u),u=r=0;for(var s=0,c=o.length;c>s;s++)o[s]()}}var o=[],r=0,u=0,f=500;n.addEventListener("resize",function(){r=t.now(),u=u||e(i,10)},!1),n.resizeStop={setThreshold:function(n){return"number"==typeof n&&n>-1&&!isNaN(n)&&isFinite(n)?(f=n,n):!1},bind:function(n){return"function"==typeof n?(o.push(n),o.length-1):!1},unbind:function(n){var e="number"==typeof n?n:o.indexOf(n);return e>-1&&o.splice(n,1),e>-1}}}(window,setTimeout,Date);
function GuitarPlayerController(){"use strict";var e,o,r,t=io.connect(),a=[],n=function(e){e.user.name!==r.name&&(shakeRightGuitar(e.user.name),playChordFromSupportGuitar(e.user,e.chord,a))};t.emit("requestkey"),t.on("getkey",function(i){e=i,console.log(e),t.emit("join room",i),t.on("current room",function(e){o=e.room,r=e.user,loadGuitar(t,r,o.name),showBackgroundGuitars(o.users,r.name),a=loadSupportGuitarsSound(r.guitar),t.on("play chord",n),t.on("user count changed",function(e){showBackgroundGuitars(e,r.name)})})}),window.addEventListener("beforeunload",function(){t.emit("leave room",{name:o.name,user:r})})}function loadGuitar(e,o,r){var t,a=new GuitarPlayerItem(o.guitar,!1),n=document.getElementById("chord1"),i=document.getElementById("chord2"),s=document.getElementById("chord3"),u=document.getElementById("chord4"),c=document.querySelector("#stage-container > figure > img"),m=function(){n.className="",i.className="",s.className="",u.className=""};c.src="/images/guitars/"+o.guitar+".svg",n.addEventListener("mouseenter",function(){a.playChord1(n),m(),n.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:1})}),i.addEventListener("mouseenter",function(){a.playChord2(i),m(),i.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:2})}),s.addEventListener("mouseenter",function(){a.playChord3(s),m(),s.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:3})}),u.addEventListener("mouseenter",function(){a.playChord4(u),m(),u.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:4})}),window.addEventListener("keydown",function(c){switch(c.keyCode){case 65:a.playChord1(n),m(),n.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:1});break;case 81:a.playChord1(n),m(),n.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:1});break;case 83:a.playChord2(i),m(),i.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:2});break;case 68:a.playChord3(s),m(),s.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:3});break;case 70:a.playChord4(u),m(),u.className="playing",clearTimeout(t),t=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:r,user:o,chord:4})}})}function showBackgroundGuitars(e,o){var r,t=e.length-1,a="",n="",i=document.getElementById("support-guitars");for(t;t>=0;t--)r=e[t],r.name!==o&&(n='<img id="',n+=r.name,n+='" src="/images/guitars/',n+=r.guitar,n+='.svg" alt="',n+=r.guitar,n+='" />',a+=n);i.innerHTML=a}function loadSupportGuitarsSound(e){var o,r,t=["cheap","heartBroken","practiceSpace","woollyOctave"],a=t.length-1,n=[];for(a;a>=0;a--)o=t[a],o!==e&&(r=new GuitarPlayerItem(o,!0),n.push(r));return n}function playChordFromSupportGuitar(e,o,r){var t,a=r.length-1;for(a;a>=0;a--)if(t=r[a],t.selectedGuitar===e.guitar)switch(o){case 1:t.playChord1();break;case 2:t.playChord2();break;case 3:t.playChord3();break;case 4:t.playChord4()}}function shakeRightGuitar(e){var o=document.getElementById(e),r=0,t=function(e){TweenMax.to(e,.05,{rotation:46}),TweenMax.to(e,.05,{rotation:44,delay:.05}),50>r?setTimeout(function(){t(e),r++},100):TweenMax.to(e,.1,{rotation:45,delay:.1})};t(o)}
var GuitarPlayerItem=function(t,o){"use strict";var r,e="../sounds/";if(this.selectedGuitar=t,this.isSupportGuitar=o,this.chord1=void 0,this.chord2=void 0,this.chord3=void 0,this.chord4=void 0,createjs.Sound.initializeDefaultPlugins()){switch(this.selectedGuitar){case"cheap":r=[{id:"cheapChord1",src:"CheapStudio/chord1CheapStudio.mp3"},{id:"cheapChord2",src:"CheapStudio/chord2CheapStudio.mp3"},{id:"cheapChord3",src:"CheapStudio/chord3CheapStudio.mp3"},{id:"cheapChord4",src:"CheapStudio/chord4CheapStudio.mp3"}];break;case"heartBroken":r=[{id:"heartBrokenChord1",src:"HeartBroken/chord1HeartBroken.mp3"},{id:"heartBrokenChord2",src:"HeartBroken/chord2HeartBroken.mp3"},{id:"heartBrokenChord3",src:"HeartBroken/chord3HeartBroken.mp3"},{id:"heartBrokenChord4",src:"HeartBroken/chord4HeartBroken.mp3"}];break;case"practiceSpace":r=[{id:"practiceSpaceChord1",src:"PracticeSpace/chord1PracticeSpace.mp3"},{id:"practiceSpaceChord2",src:"PracticeSpace/chord2PracticeSpace.mp3"},{id:"practiceSpaceChord3",src:"PracticeSpace/chord3PracticeSpace.mp3"},{id:"practiceSpaceChord4",src:"PracticeSpace/chord4PracticeSpace.mp3"}];break;case"woollyOctave":r=[{id:"woollyOctaveChord1",src:"WoollyOctave/chord1WoollyOctave.mp3"},{id:"woollyOctaveChord2",src:"WoollyOctave/chord2WoollyOctave.mp3"},{id:"woollyOctaveChord3",src:"WoollyOctave/chord3WoollyOctave.mp3"},{id:"woollyOctaveChord4",src:"WoollyOctave/chord4WoollyOctave.mp3"}]}createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.registerManifest(r,e)}};GuitarPlayerItem.prototype={get Name(){return this.name},get Chord1(){return this.selectedGuitar+"Chord1"},get Chord2(){return this.selectedGuitar+"Chord2"},get Chord3(){return this.selectedGuitar+"Chord3"},get Chord4(){return this.selectedGuitar+"Chord4"},playChord1:function(){this.stopAllChords(),void 0===this.chord1?(this.chord1=createjs.Sound.play(this.selectedGuitar+"Chord1"),this.isSupportGuitar&&this.chord1.setVolume(.5)):(this.chord1.stop(),this.chord1.play())},playChord2:function(){this.stopAllChords(),void 0===this.chord2?(this.chord2=createjs.Sound.play(this.selectedGuitar+"Chord2"),this.isSupportGuitar&&this.chord2.setVolume(.5)):(this.chord2.stop(),this.chord2.play())},playChord3:function(){this.stopAllChords(),void 0===this.chord3?(this.chord3=createjs.Sound.play(this.selectedGuitar+"Chord3"),this.isSupportGuitar&&this.chord1.setVolume(.5)):(this.chord3.stop(),this.chord3.play())},playChord4:function(){this.stopAllChords(),void 0===this.chord4?(this.chord4=createjs.Sound.play(this.selectedGuitar+"Chord4"),this.isSupportGuitar&&this.chord1.setVolume(.5)):(this.chord4.stop(),this.chord4.play())},stopAllChords:function(){void 0!==this.chord1&&this.chord1.stop(),void 0!==this.chord2&&this.chord2.stop(),void 0!==this.chord3&&this.chord3.stop(),void 0!==this.chord4&&this.chord4.stop()}};
!function(){"use strict";angular.module("app",[])}();
function showPosition(o){codeLatLng(o.coords.latitude,o.coords.longitude)}function showError(o){switch(o.code){case o.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case o.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case o.TIMEOUT:console.log("The request to get user location timed out.");break;case o.UNKNOWN_ERROR:console.log("An unknown error occurred.")}}function codeLatLng(o,e){var t=new google.maps.Geocoder,n=new google.maps.LatLng(o,e);t.geocode({latLng:n},function(o,e){if(e==google.maps.GeocoderStatus.OK)if(console.log(o),o[1]){alert(o[0].formatted_address);for(var t=0;t<o[0].address_components.length;t++)for(var n=0;n<o[0].address_components[t].types.length;n++)if("administrative_area_level_1"==o[0].address_components[t].types[n]){city=o[0].address_components[t];break}alert(city.short_name+" "+city.long_name)}else alert("No results found");else alert("Geocoder failed due to: "+e)})}!function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,showError):console.log("Geolocation is not supported by this browser.")}();
var HistoryAnimationItem=function(t,e){"use strict";this.index=t,this.data=e,this.year=document.querySelectorAll(".year")[t],this.guitarItem=document.getElementsByTagName("section")[t],this.fullHeight=0,this.smallHeight=0,this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.tl1=new TimelineMax({paused:"true"}),this.tl2=new TimelineMax({paused:"true"}),this.tl3=new TimelineMax({paused:"true"}),this.tl4=new TimelineMax({paused:"true"}),this.isOpen=!1};HistoryAnimationItem.prototype={get IsOpen(){return this.isOpen},loadImages:function(){console.log("RECALC");var t=this;t.guitarItem.children[2].src=t.data[t.index].Image,t.guitarItem.children[2].addEventListener("load",function(){t.calculateAnimations()},!1)},calculateAnimations:function(){var t=this;for(this.fullHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.i;this.i>=0;this.i--)this.extraData[this.i].className="fullyhidden";for(this.smallHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.j;this.j>=0;this.j--)this.mainData[this.j].className="hidden";this.guitarItem.className="closedItem",this.tl1.to(this.guitarItem,.4,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"show"}),this.tl2.to(this.guitarItem,.4,{height:this.fullHeight}).to(this.extraData,0,{className:"block"}).to(this.extraData,.2,{className:"fullshow"}),this.tl3.to(this.extraData,.2,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,.2,{height:this.smallHeight}).to(this.guitarItem,0,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"hidden"}).to(this.guitarItem,.5,{className:"closedItem"}),this.tl4.to([this.mainData,this.extraData],.1,{className:"hidden"}).to(this.guitarItem,.1,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,0,{height:this.smallHeight});var e=new CustomEvent("closeItems",{detail:{source:this.index},bubbles:!0,cancelable:!0});document.addEventListener("closeItems",function(e){e.detail.source!==t.index&&t.isOpen&&(t.tl4.play(0),t.year.className="",t.isOpen=!1)},!1),this.year.addEventListener("mouseenter",function(){t.isOpen||t.tl1.play(0)}),this.year.addEventListener("mouseleave",function(){t.isOpen||t.tl1.reverse()}),this.year.addEventListener("click",function(i){i.target.className="active",console.log(t.isOpen),t.isOpen=!0,t.tl2.play(0),i.target.dispatchEvent(e)})},closeItem:function(){console.log("CLOSE"),this.isOpen=!1,this.tl4.play(0)},reset:function(){var t,e,i=this.guitarItem.children.length-1;for(this.tl1.invalidate(),this.tl2.invalidate(),this.tl3.invalidate(),this.tl4.invalidate(),this.tl1.pause(0,!0),this.tl2.pause(0,!0),this.tl3.pause(0,!0),this.tl4.pause(0,!0),this.tl1.kill(),this.tl2.kill(),this.tl3.kill(),this.tl4.kill(),this.tl1=null,this.tl2=null,this.tl3=null,this.tl4=null,this.tl1=new TimelineMax({paused:"true"}),this.tl2=new TimelineMax({paused:"true"}),this.tl3=new TimelineMax({paused:"true"}),this.tl4=new TimelineMax({paused:"true"}),this.fullHeight=0,this.smallHeight=0,this.guitarItem.removeAttribute("class"),this.guitarItem.removeAttribute("style"),t=this.guitarItem.cloneNode(!0),this.guitarItem.parentNode.replaceChild(t,this.guitarItem),this.guitarItem=t,t=this.year.cloneNode(!0),this.year.parentNode.replaceChild(t,this.year),this.year=t,i;i>=0;i--)e=this.guitarItem.children[i],e.removeAttribute("class"),e.removeAttribute("style"),t=e.cloneNode(!0),e.parentNode.replaceChild(t,e);this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.isOpen=!1,this.year.className=""}};
!function(){"use strict";var t=function(t,n,o){t.items=[],t.layoutDone=function(){o(function(){animateAllTheThings(t.items),GuitarPlayerController()},0)};var a=function(n){angular.forEach(n.data,function(n){var o=new GuitarHistoryItem(n.title,n.date,n.description,n.image,n.interactiveGuitarName);t.items.push(o)})},e=function(t){console.log(t)};n.get("http://"+window.location.hostname+":3000/api/allData").then(a,e)},n=angular.module("app");n.controller("HistoryItemController",["$scope","$http","$timeout",t])}();
!function(){"use strict";var e=angular.module("app");e.directive("repeatDone",function(){return function(e,n,t){e.$last&&e.$eval(t.repeatDone)}})}();
var GuitarHistoryItem=function(t,e,i,r,n){this.title=t,this.date=e,this.year=e.split(" ")[2],this.description=i,this.image=r,this.interactiveGuitarName=n};GuitarHistoryItem.prototype={get Title(){return this.title},get Date(){return this.date},get Year(){return this.year},get Description(){return this.description},get Image(){return this.image},get InteractiveGuitarName(){return this.interactiveGuitarName}};