!function(){"use strict";angular.module("app",[])}();
var GuitarPlayerItem=function(t,o){"use strict";var r,e="../sounds/";if(this.selectedGuitar=t,this.isSupportGuitar=o,this.chord1=void 0,this.chord2=void 0,this.chord3=void 0,this.chord4=void 0,createjs.Sound.initializeDefaultPlugins()){switch(this.selectedGuitar){case"cheap":r=[{id:"cheapChord1",src:"CheapStudio/chord1CheapStudio.mp3"},{id:"cheapChord2",src:"CheapStudio/chord2CheapStudio.mp3"},{id:"cheapChord3",src:"CheapStudio/chord3CheapStudio.mp3"},{id:"cheapChord4",src:"CheapStudio/chord4CheapStudio.mp3"}];break;case"heartBroken":r=[{id:"heartBrokenChord1",src:"HeartBroken/chord1HeartBroken.mp3"},{id:"heartBrokenChord2",src:"HeartBroken/chord2HeartBroken.mp3"},{id:"heartBrokenChord3",src:"HeartBroken/chord3HeartBroken.mp3"},{id:"heartBrokenChord4",src:"HeartBroken/chord4HeartBroken.mp3"}];break;case"practiceSpace":r=[{id:"practiceSpaceChord1",src:"PracticeSpace/chord1PracticeSpace.mp3"},{id:"practiceSpaceChord2",src:"PracticeSpace/chord2PracticeSpace.mp3"},{id:"practiceSpaceChord3",src:"PracticeSpace/chord3PracticeSpace.mp3"},{id:"practiceSpaceChord4",src:"PracticeSpace/chord4PracticeSpace.mp3"}];break;case"woollyOctave":r=[{id:"woollyOctaveChord1",src:"WoollyOctave/chord1WoollyOctave.mp3"},{id:"woollyOctaveChord2",src:"WoollyOctave/chord2WoollyOctave.mp3"},{id:"woollyOctaveChord3",src:"WoollyOctave/chord3WoollyOctave.mp3"},{id:"woollyOctaveChord4",src:"WoollyOctave/chord4WoollyOctave.mp3"}]}createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.registerManifest(r,e)}};GuitarPlayerItem.prototype={get Name(){return this.name},get Chord1(){return this.selectedGuitar+"Chord1"},get Chord2(){return this.selectedGuitar+"Chord2"},get Chord3(){return this.selectedGuitar+"Chord3"},get Chord4(){return this.selectedGuitar+"Chord4"},playChord1:function(){this.stopAllChords(),void 0===this.chord1?(this.chord1=createjs.Sound.play(this.selectedGuitar+"Chord1"),this.isSupportGuitar&&this.chord1.setVolume(.5)):(this.chord1.stop(),this.chord1.play())},playChord2:function(){this.stopAllChords(),void 0===this.chord2?(this.chord2=createjs.Sound.play(this.selectedGuitar+"Chord2"),this.isSupportGuitar&&this.chord2.setVolume(.5)):(this.chord2.stop(),this.chord2.play())},playChord3:function(){this.stopAllChords(),void 0===this.chord3?(this.chord3=createjs.Sound.play(this.selectedGuitar+"Chord3"),this.isSupportGuitar&&this.chord3.setVolume(.5)):(this.chord3.stop(),this.chord3.play())},playChord4:function(){this.stopAllChords(),void 0===this.chord4?(this.chord4=createjs.Sound.play(this.selectedGuitar+"Chord4"),this.isSupportGuitar&&this.chord4.setVolume(.5)):(this.chord4.stop(),this.chord4.play())},stopAllChords:function(){void 0!==this.chord1&&this.chord1.stop(),void 0!==this.chord2&&this.chord2.stop(),void 0!==this.chord3&&this.chord3.stop(),void 0!==this.chord4&&this.chord4.stop()}};
function guitarPlayerController(e){"use strict";var t,n,o,r,i=[],a=function(e){e.user.name!==r.name&&(shakeRightGuitar(e.user.name),playChordFromSupportGuitar(e.user,e.chord,i))},u=document.getElementById("locationloader"),c=document.querySelector("#stage-container>figure"),s=document.getElementById("support-guitars");e?(TweenLite.to(u,.2,{className:"invisible"}),TweenLite.to([c,s],.2,{delay:.2,className:"-=invisible"}),loadGuitar(t,{name:"offlineUser",guitar:"cheap"},"offlineRoom")):(t=io.connect(),t.emit("requestkey"),t.on("getkey",function(e){n=e,getLocation(function(n){t.emit("join room",{key:e,location:n}),t.on("current room",function(e){o=e.room,r=e.user,TweenLite.to(u,.2,{className:"invisible"}),TweenLite.to([c,s],.2,{delay:.2,className:"-=invisible"}),loadGuitar(t,r,o.name),showBackgroundGuitars(o.users,r.name),i=loadSupportGuitarsSound(r.guitar),t.on("play chord",a),t.on("user count changed",function(e){showBackgroundGuitars(e,r.name)})})})})),window.addEventListener("beforeunload",function(){void 0!==o&&t.emit("leave room",{name:o.name,user:r})})}function loadGuitar(e,t,n){var o,r=new GuitarPlayerItem(t.guitar,!1),i=document.getElementById("chord1"),a=document.getElementById("chord2"),u=document.getElementById("chord3"),c=document.getElementById("chord4"),s=!1,d=document.querySelector("#stage-container > figure > img"),m=function(){i.className="",a.className="",u.className="",c.className=""},l=function(a){if(a){if(s)return;s=!0}r.playChord1(),m(),i.className="playing",clearTimeout(o),o=setTimeout(function(){m()},7e3),void 0!==e&&e.emit("send chord to server",{roomName:n,user:t,chord:1})},f=function(i){if(i){if(s)return;s=!0}r.playChord2(),m(),a.className="playing",clearTimeout(o),o=setTimeout(function(){m()},7e3),void 0!==e&&e.emit("send chord to server",{roomName:n,user:t,chord:2})},g=function(i){if(i){if(s)return;s=!0}r.playChord3(),m(),u.className="playing",clearTimeout(o),o=setTimeout(function(){m()},7e3),void 0!==e&&e.emit("send chord to server",{roomName:n,user:t,chord:3})},h=function(i){if(i){if(s)return;s=!0}r.playChord4(),m(),c.className="playing",clearTimeout(o),o=setTimeout(function(){m()},7e3),void 0!==e&&e.emit("send chord to server",{roomName:n,user:t,chord:4})};d.src="/build/images/guitars/"+t.guitar+".svg",i.addEventListener("mouseenter",function(){l(!1)}),a.addEventListener("mouseenter",function(){f(!1)}),u.addEventListener("mouseenter",function(){g(!1)}),c.addEventListener("mouseenter",function(){h(!1)}),i.addEventListener("click",function(){l(!1)}),a.addEventListener("click",function(){f(!1)}),u.addEventListener("click",function(){g(!1)}),c.addEventListener("click",function(){h(!1)}),window.addEventListener("keydown",function(e){switch(e.keyCode){case 65:l(!0);break;case 81:l(!0);break;case 83:f(!0);break;case 68:g(!0);break;case 70:h(!0)}}),window.addEventListener("keyup",function(){s=!1})}function showBackgroundGuitars(e,t){var n,o=e.length-1,r="",i="",a=document.getElementById("support-guitars"),u=function(e){var t="";return e.length>17?(t=e.substring(0,17),t+="...",t.trim()):e.trim()};for(o;o>=0;o--)n=e[o],n.name!==t&&(i='<figure class="support-guitar" id="',i+=n.name,i+='"> <img src="/build/images/guitars/',i+=n.guitar,i+='.svg" alt="',i+=n.guitar,i+='" />',i+="<figcaption>",i+=u(n.location),i+="</figcaption></figure>",r+=i);a.innerHTML=r}function loadSupportGuitarsSound(e){var t,n,o=["cheap","heartBroken","practiceSpace","woollyOctave"],r=o.length-1,i=[];for(r;r>=0;r--)t=o[r],t!==e&&(n=new GuitarPlayerItem(t,!0),i.push(n));return i}function playChordFromSupportGuitar(e,t,n){var o,r=n.length-1;for(r;r>=0;r--)if(o=n[r],o.selectedGuitar===e.guitar)switch(t){case 1:o.playChord1();break;case 2:o.playChord2();break;case 3:o.playChord3();break;case 4:o.playChord4()}}function shakeRightGuitar(e){var t=document.getElementById(e),n=0,o=function(e){TweenMax.to(e,.05,{rotation:46}),TweenMax.to(e,.05,{rotation:44,delay:.05}),50>n?setTimeout(function(){o(e),n++},100):TweenMax.to(e,.1,{rotation:45,delay:.1})};o(t)}
!function(n,e,t){function i(){var n=t.now();if(f>n-r)u=e(i,10);else{clearTimeout(u),u=r=0;for(var s=0,c=o.length;c>s;s++)o[s]()}}var o=[],r=0,u=0,f=500;n.addEventListener("resize",function(){r=t.now(),u=u||e(i,10)},!1),n.resizeStop={setThreshold:function(n){return"number"==typeof n&&n>-1&&!isNaN(n)&&isFinite(n)?(f=n,n):!1},bind:function(n){return"function"==typeof n?(o.push(n),o.length-1):!1},unbind:function(n){var e="number"==typeof n?n:o.indexOf(n);return e>-1&&o.splice(n,1),e>-1}}}(window,setTimeout,Date);
function getLocation(o){navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(e){var n=new google.maps.Geocoder,t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);n.geocode({latLng:t},function(e,n){o(n==google.maps.GeocoderStatus.OK?e[1]?e[1].address_components[1].long_name:"Space":"Space")})},function(){o("Space")}):o("Space")}
!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();
!function(){"use strict";var e=document.getElementById("play-guitar"),t=document.getElementById("stage-container"),o=document.getElementById("back-to-top"),n=document.getElementsByTagName("header")[0];window.smoothScroll=function(e){var t,o=e,n=0;do{if(o=o.parentNode,!o)return;o.scrollTop+=1}while(0===o.scrollTop);do{if(e==o)break;n+=e.offsetTop}while(e==e.offsetParent);(t=function(e,o,n,c){c++,c>30||(e.scrollTop=o+(n-o)/30*c,setTimeout(function(){t(e,o,n,c)},20))})(o,o.scrollTop,n,0)},e.addEventListener("click",function(){smoothScroll(t)}),o.addEventListener("click",function(){smoothScroll(n)})}();
var HistoryAnimationItem=function(t,e){"use strict";this.index=t,this.data=e,this.year=document.querySelectorAll("inlay")[this.index],this.guitarItem=document.getElementsByTagName("section")[t],this.fullHeight=0,this.smallHeight=0,this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.tl1=new TimelineLite({paused:"true"}),this.tl2=new TimelineLite({paused:"true"}),this.tl3=new TimelineLite({paused:"true"}),this.tl4=new TimelineLite({paused:"true"}),this.tl5=new TimelineLite({paused:"true"}),this.isOpen=!1,this.isFirstTime=!1};HistoryAnimationItem.prototype={get IsOpen(){return this.isOpen},loadImages:function(){var t=this;t.guitarItem.children[2].src=t.data[t.index].Image,t.guitarItem.children[2].addEventListener("load",function(){t.isFirstTime=!0,t.calculateAnimations()},!1)},calculateAnimations:function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(800>=t)){for(this.fullHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.i;this.i>=0;this.i--)this.extraData[this.i].className="fullyhidden";for(this.smallHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.guitarItem.style.top=this.year.offsetTop-this.smallHeight/4+"px",this.j;this.j>=0;this.j--)this.mainData[this.j].className="hidden";this.guitarItem.className="closedItem",this.tl1.to(this.guitarItem,.4,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"show"}),this.tl2.to(this.guitarItem,.4,{height:this.fullHeight}).to(this.extraData,0,{className:"block"}).to(this.extraData,.2,{className:"fullshow"}),this.tl3.to(this.extraData,.2,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,.2,{height:this.smallHeight}).to(this.guitarItem,0,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"hidden"}).to(this.guitarItem,.5,{className:"closedItem"}),this.tl4.to([this.mainData,this.extraData],.1,{className:"hidden"}).to(this.guitarItem,.1,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,0,{height:this.smallHeight}),this.tl5.to(this.guitarItem,.4,{className:"+=opaqueItem"}),this.isFirstTime&&(this.addEvents(),this.isFirstTime=!1)}},addEvents:function(){var t=this,e=new CustomEvent("closeItems",{detail:{source:this.index},bubbles:!0,cancelable:!0}),i=new CustomEvent("fadeOutItems",{detail:{source:this.index},bubbles:!0,cancelable:!0}),s=new CustomEvent("fadeInItems",{detail:{source:this.index},bubbles:!0,cancelable:!0});document.addEventListener("closeItems",function(e){e.detail.source!==t.index&&t.isOpen&&(t.tl4.play(0),t.year.children[0].classList?t.year.children[0].classList.remove("active"):t.year.children[0].className=t.year.children[0].className.replace(new RegExp("(^|\\b)"+"active".split(" ").join("|")+"(\\b|$)","gi")," "),t.isOpen=!1)},!1),document.addEventListener("fadeOutItems",function(e){e.detail.source!==t.index&&t.isOpen===!0&&t.tl5.play(0)},!1),document.addEventListener("fadeInItems",function(e){e.detail.source!==t.index&&t.isOpen===!0&&t.tl5.reverse()},!1),this.year.addEventListener("mouseenter",function(e){t.isOpen||(t.tl1.play(0),e.target.dispatchEvent(i))}),this.year.addEventListener("mouseleave",function(e){t.isOpen||(t.tl1.reverse(),e.target.dispatchEvent(s))}),this.year.addEventListener("click",function(i){i.target.classList?i.target.classList.add("active"):i.target.className+=" active",t.isOpen=!0,t.tl2.play(0),i.target.dispatchEvent(e)})},closeItem:function(){this.isOpen=!1,this.tl4.play(0)},reset:function(){var t,e=this.guitarItem.children.length-1;for(this.tl1=new TimelineLite({paused:"true"}),this.tl2=new TimelineLite({paused:"true"}),this.tl3=new TimelineLite({paused:"true"}),this.tl4=new TimelineLite({paused:"true"}),this.tl5=new TimelineLite({paused:"true"}),this.fullHeight=0,this.smallHeight=0,this.guitarItem.removeAttribute("class"),this.guitarItem.removeAttribute("style"),this.year.children[0].classList?this.year.children[0].classList.remove("active"):this.year.children[0].className=this.year.children[0].className.replace(new RegExp("(^|\\b)"+"active".split(" ").join("|")+"(\\b|$)","gi")," "),e;e>=0;e--)t=this.guitarItem.children[e],t.removeAttribute("class"),t.removeAttribute("style");this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.isOpen=!1,this.year.className=""}};
function startAnimations(e){"use strict";function t(){var e=n.length-1;for(e;e>=0;e--)n[e].reset(),n[e].calculateAnimations();a=!1}var n=[],i=e.length-1,a=!1,o=document.querySelector("#data-container > img"),s=document.getElementById("stage-container"),r=new CustomEvent("closeItems",{detail:{source:void 0},bubbles:!0,cancelable:!0});for(i;i>=0;i--){var c=new HistoryAnimationItem(i,e);c.loadImages(),n.push(c)}window.addEventListener("resize",function(){if(!a){var e=n.length-1;for(e;e>=0;e--){var t=n[e];t.IsOpen&&n[e].closeItem()}a=!0}}),o.addEventListener("click",function(e){e.target===this&&e.target.dispatchEvent(r)}),s.addEventListener("click",function(e){e.target.dispatchEvent(r)}),window.resizeStop.bind(t),window.resizeStop.setThreshold(200)}
!function(){"use strict";var t=function(t,a,i){var e=!1;t.items=[],t.layoutDone=function(){i(function(){startAnimations(t.items),guitarPlayerController(e)},0)};var r=function(a){localStorage.setItem("guitarHistoryData",JSON.stringify(a)),angular.forEach(a.data,function(a){var i=new GuitarHistoryItem(a.title,a.date,a.description,a.image,a.interactiveGuitarName);t.items.push(i)})},o=function(){e=!0;var a=JSON.parse(localStorage.getItem("guitarHistoryData"));(void 0!==a||null!==a)&&angular.forEach(a.data,function(a){var i=new GuitarHistoryItem(a.title,a.date,a.description,a.image,a.interactiveGuitarName);t.items.push(i)})};a.get("http://"+window.location.hostname+":3000/api/allData").then(r,o)},a=angular.module("app");a.controller("HistoryItemController",["$scope","$http","$timeout",t])}();
!function(){"use strict";var t=angular.module("app");t.directive("inlay",function(){return{restrict:"E",templateUrl:"directives/inlay"}})}();
!function(){"use strict";var e=angular.module("app");e.directive("repeatDone",function(){return function(e,n,t){e.$last&&e.$eval(t.repeatDone)}})}();
var GuitarHistoryItem=function(t,e,i,r,n){this.title=t,this.date=e,this.year=e.split(" ")[e.split(" ").length-1],this.description=i,this.image=r,this.interactiveGuitarName=n};GuitarHistoryItem.prototype={get Title(){return this.title},get Date(){return this.date},get Year(){return this.year},get Description(){return this.description},get Image(){return this.image},get InteractiveGuitarName(){return this.interactiveGuitarName}};