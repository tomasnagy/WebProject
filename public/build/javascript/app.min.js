function animateAllTheThings(e){"use strict";function n(){var e=t.length-1;for(e;e>=0;e--)t[e].reset(),console.log("RESET"),t[e].calculateAnimations();o=!1}var t=[],i=e.length-1,o=!1;for(i;i>=0;i--){var s=new HistoryAnimationItem(i,e);s.loadImages(),t.push(s)}window.addEventListener("resize",function(){if(!o){var e=t.length-1;for(e;e>=0;e--){var n=t[e];n.IsOpen&&t[e].closeItem()}o=!0}}),window.resizeStop.bind(n),window.resizeStop.setThreshold(200)}
!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();
!function(){"use strict";angular.module("app",[])}();
function GuitarPlayerController(){"use strict";var e,o,t,r=io.connect(),a=[],n=function(e){e.user.name!==t.name&&(shakeRightGuitar(e.user.name),playChordFromSupportGuitar(e.user,e.chord,a))},i=document.getElementById("locationloader"),s=document.querySelector("#stage-container>figure"),c=document.getElementById("support-guitars");r.emit("requestkey"),r.on("getkey",function(u){e=u,console.log(e.name),getLocation(function(e){r.emit("join room",{key:u,location:e}),r.on("current room",function(e){o=e.room,t=e.user,TweenLite.to(i,.2,{className:"invisible"}),TweenLite.to([s,c],.2,{delay:.2,className:"-=invisible"}),loadGuitar(r,t,o.name),showBackgroundGuitars(o.users,t.name),a=loadSupportGuitarsSound(t.guitar),r.on("play chord",n),r.on("user count changed",function(e){showBackgroundGuitars(e,t.name)})})})}),window.addEventListener("beforeunload",function(){void 0!==o&&r.emit("leave room",{name:o.name,user:t})})}function loadGuitar(e,o,t){var r,a=new GuitarPlayerItem(o.guitar,!1),n=document.getElementById("chord1"),i=document.getElementById("chord2"),s=document.getElementById("chord3"),c=document.getElementById("chord4"),u=document.querySelector("#stage-container > figure > img"),m=function(){n.className="",i.className="",s.className="",c.className=""};u.src="/images/guitars/"+o.guitar+".svg",n.addEventListener("mouseenter",function(){a.playChord1(),m(),n.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:t,user:o,chord:1})}),i.addEventListener("mouseenter",function(){a.playChord2(),m(),i.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:t,user:o,chord:2})}),s.addEventListener("mouseenter",function(){a.playChord3(),m(),s.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:t,user:o,chord:3})}),c.addEventListener("mouseenter",function(){a.playChord4(),m(),c.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3),e.emit("send chord to server",{roomName:t,user:o,chord:4})}),n.addEventListener("click",function(){a.playChord1(),e.emit("send chord to server",{roomName:t,user:o,chord:1}),m(),n.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3)}),i.addEventListener("click",function(){a.playChord2(),e.emit("send chord to server",{roomName:t,user:o,chord:2}),m(),i.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3)}),s.addEventListener("click",function(){a.playChord3(),e.emit("send chord to server",{roomName:t,user:o,chord:3}),m(),s.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3)}),c.addEventListener("click",function(){a.playChord4(),e.emit("send chord to server",{roomName:t,user:o,chord:4}),m(),c.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3)}),window.addEventListener("keydown",function(u){switch(u.keyCode){case 65:a.playChord1(),e.emit("send chord to server",{roomName:t,user:o,chord:1}),m(),n.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3);break;case 81:a.playChord1(),e.emit("send chord to server",{roomName:t,user:o,chord:1}),m(),n.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3);break;case 83:a.playChord2(),e.emit("send chord to server",{roomName:t,user:o,chord:2}),m(),i.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3);break;case 68:a.playChord3(),e.emit("send chord to server",{roomName:t,user:o,chord:3}),m(),s.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3);break;case 70:a.playChord4(),e.emit("send chord to server",{roomName:t,user:o,chord:4}),m(),c.className="playing",clearTimeout(r),r=setTimeout(function(){m()},7e3)}})}function showBackgroundGuitars(e,o){var t,r=e.length-1,a="",n="",i=document.getElementById("support-guitars"),s=function(e){var o="";return e.length>17?(o=e.substring(0,17),o+="...",o.trim()):e.trim()};for(r;r>=0;r--)t=e[r],t.name!==o&&(n='<figure class="support-guitar" id="',n+=t.name,n+='"> <img src="/build/images/guitars/',n+=t.guitar,n+='.svg" alt="',n+=t.guitar,n+='" />',n+="<figcaption>",n+=s(t.location),n+="</figcaption></figure>",a+=n);i.innerHTML=a}function loadSupportGuitarsSound(e){var o,t,r=["cheap","heartBroken","practiceSpace","woollyOctave"],a=r.length-1,n=[];for(a;a>=0;a--)o=r[a],o!==e&&(t=new GuitarPlayerItem(o,!0),n.push(t));return n}function playChordFromSupportGuitar(e,o,t){var r,a=t.length-1;for(a;a>=0;a--)if(r=t[a],r.selectedGuitar===e.guitar)switch(o){case 1:r.playChord1();break;case 2:r.playChord2();break;case 3:r.playChord3();break;case 4:r.playChord4()}}function shakeRightGuitar(e){var o=document.getElementById(e),t=0,r=function(e){TweenMax.to(e,.05,{rotation:46}),TweenMax.to(e,.05,{rotation:44,delay:.05}),50>t?setTimeout(function(){r(e),t++},100):TweenMax.to(e,.1,{rotation:45,delay:.1})};r(o)}
var GuitarPlayerItem=function(t,o){"use strict";var r,e="../sounds/";if(this.selectedGuitar=t,this.isSupportGuitar=o,this.chord1=void 0,this.chord2=void 0,this.chord3=void 0,this.chord4=void 0,createjs.Sound.initializeDefaultPlugins()){switch(this.selectedGuitar){case"cheap":r=[{id:"cheapChord1",src:"CheapStudio/chord1CheapStudio.mp3"},{id:"cheapChord2",src:"CheapStudio/chord2CheapStudio.mp3"},{id:"cheapChord3",src:"CheapStudio/chord3CheapStudio.mp3"},{id:"cheapChord4",src:"CheapStudio/chord4CheapStudio.mp3"}];break;case"heartBroken":r=[{id:"heartBrokenChord1",src:"HeartBroken/chord1HeartBroken.mp3"},{id:"heartBrokenChord2",src:"HeartBroken/chord2HeartBroken.mp3"},{id:"heartBrokenChord3",src:"HeartBroken/chord3HeartBroken.mp3"},{id:"heartBrokenChord4",src:"HeartBroken/chord4HeartBroken.mp3"}];break;case"practiceSpace":r=[{id:"practiceSpaceChord1",src:"PracticeSpace/chord1PracticeSpace.mp3"},{id:"practiceSpaceChord2",src:"PracticeSpace/chord2PracticeSpace.mp3"},{id:"practiceSpaceChord3",src:"PracticeSpace/chord3PracticeSpace.mp3"},{id:"practiceSpaceChord4",src:"PracticeSpace/chord4PracticeSpace.mp3"}];break;case"woollyOctave":r=[{id:"woollyOctaveChord1",src:"WoollyOctave/chord1WoollyOctave.mp3"},{id:"woollyOctaveChord2",src:"WoollyOctave/chord2WoollyOctave.mp3"},{id:"woollyOctaveChord3",src:"WoollyOctave/chord3WoollyOctave.mp3"},{id:"woollyOctaveChord4",src:"WoollyOctave/chord4WoollyOctave.mp3"}]}createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.registerManifest(r,e)}};GuitarPlayerItem.prototype={get Name(){return this.name},get Chord1(){return this.selectedGuitar+"Chord1"},get Chord2(){return this.selectedGuitar+"Chord2"},get Chord3(){return this.selectedGuitar+"Chord3"},get Chord4(){return this.selectedGuitar+"Chord4"},playChord1:function(){this.stopAllChords(),void 0===this.chord1?(this.chord1=createjs.Sound.play(this.selectedGuitar+"Chord1"),this.isSupportGuitar&&this.chord1.setVolume(.5)):(this.chord1.stop(),this.chord1.play())},playChord2:function(){this.stopAllChords(),void 0===this.chord2?(this.chord2=createjs.Sound.play(this.selectedGuitar+"Chord2"),this.isSupportGuitar&&this.chord2.setVolume(.5)):(this.chord2.stop(),this.chord2.play())},playChord3:function(){this.stopAllChords(),void 0===this.chord3?(this.chord3=createjs.Sound.play(this.selectedGuitar+"Chord3"),this.isSupportGuitar&&this.chord3.setVolume(.5)):(this.chord3.stop(),this.chord3.play())},playChord4:function(){this.stopAllChords(),void 0===this.chord4?(this.chord4=createjs.Sound.play(this.selectedGuitar+"Chord4"),this.isSupportGuitar&&this.chord4.setVolume(.5)):(this.chord4.stop(),this.chord4.play())},stopAllChords:function(){void 0!==this.chord1&&this.chord1.stop(),void 0!==this.chord2&&this.chord2.stop(),void 0!==this.chord3&&this.chord3.stop(),void 0!==this.chord4&&this.chord4.stop()}};
!function(n,e,t){function i(){var n=t.now();if(f>n-r)u=e(i,10);else{clearTimeout(u),u=r=0;for(var s=0,c=o.length;c>s;s++)o[s]()}}var o=[],r=0,u=0,f=500;n.addEventListener("resize",function(){r=t.now(),u=u||e(i,10)},!1),n.resizeStop={setThreshold:function(n){return"number"==typeof n&&n>-1&&!isNaN(n)&&isFinite(n)?(f=n,n):!1},bind:function(n){return"function"==typeof n?(o.push(n),o.length-1):!1},unbind:function(n){var e="number"==typeof n?n:o.indexOf(n);return e>-1&&o.splice(n,1),e>-1}}}(window,setTimeout,Date);
function getLocation(o){navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(n){var e=new google.maps.Geocoder,t=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);e.geocode({latLng:t},function(n,e){e==google.maps.GeocoderStatus.OK?(console.log(n),o(n[1]?n[1].address_components[1].long_name:"Space")):o("Space")})},function(){o("Space")}):(o("Space"),console.log("Geolocation is not supported by this browser."))}function codeLatLng(){}
!function(){var o=document.getElementById("play-guitar"),t=document.getElementById("stage-container");window.smoothScroll=function(o){var t=o,e=0;do{if(t=t.parentNode,!t)return;t.scrollTop+=1}while(0==t.scrollTop);do{if(o==t)break;e+=o.offsetTop}while(o=o.offsetParent);(scroll=function(o,t,e,l){l++,l>30||(o.scrollTop=t+(e-t)/30*l,setTimeout(function(){scroll(o,t,e,l)},20))})(t,t.scrollTop,e,0)},o.addEventListener("click",function(){smoothScroll(t)})}();
var HistoryAnimationItem=function(t,e){"use strict";this.index=t,this.data=e,this.year=document.querySelectorAll("inlay")[this.index],this.guitarItem=document.getElementsByTagName("section")[t],this.fullHeight=0,this.smallHeight=0,this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.tl1=new TimelineLite({paused:"true"}),this.tl2=new TimelineLite({paused:"true"}),this.tl3=new TimelineLite({paused:"true"}),this.tl4=new TimelineLite({paused:"true"}),this.tl5=new TimelineLite({paused:"true"}),this.isOpen=!1};HistoryAnimationItem.prototype={get IsOpen(){return this.isOpen},loadImages:function(){var t=this;t.guitarItem.children[2].src=t.data[t.index].Image,t.guitarItem.children[2].addEventListener("load",function(){t.calculateAnimations()},!1)},calculateAnimations:function(){var t=this,e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=new CustomEvent("closeItems",{detail:{source:this.index},bubbles:!0,cancelable:!0}),s=new CustomEvent("fadeOutItems",{detail:{source:this.index},bubbles:!0,cancelable:!0}),a=new CustomEvent("fadeInItems",{detail:{source:this.index},bubbles:!0,cancelable:!0});if(!(600>=e)){for(this.fullHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),console.log("FULLHEIGHT: "+this.fullHeight),this.i;this.i>=0;this.i--)this.extraData[this.i].className="fullyhidden";for(this.smallHeight=parseInt(window.getComputedStyle(this.guitarItem,null).getPropertyValue("height")),this.guitarItem.style.top=this.year.offsetTop-this.smallHeight/4+"px",this.j;this.j>=0;this.j--)this.mainData[this.j].className="hidden";this.guitarItem.className="closedItem",this.tl1.to(this.guitarItem,.4,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"show"}),this.tl2.to(this.guitarItem,.4,{height:this.fullHeight}).to(this.extraData,0,{className:"block"}).to(this.extraData,.2,{className:"fullshow"}),this.tl3.to(this.extraData,.2,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,.2,{height:this.smallHeight}).to(this.guitarItem,0,{className:"peekOpenItem"}).to(this.mainData,.2,{className:"hidden"}).to(this.guitarItem,.5,{className:"closedItem"}),this.tl4.to([this.mainData,this.extraData],.1,{className:"hidden"}).to(this.guitarItem,.1,{className:"hidden"}).to(this.extraData,0,{className:"fullyhidden"}).to(this.guitarItem,0,{height:this.smallHeight}),this.tl5.to(this.guitarItem,.4,{className:"+=opaqueItem"}),document.addEventListener("closeItems",function(e){e.detail.source!==t.index&&t.isOpen&&(t.tl4.play(0),t.year.children[0].classList?t.year.children[0].classList.remove("active"):t.year.children[0].className=t.year.children[0].className.replace(new RegExp("(^|\\b)"+"active".split(" ").join("|")+"(\\b|$)","gi")," "),t.isOpen=!1)},!1),document.addEventListener("fadeOutItems",function(e){e.detail.source!==t.index&&t.isOpen===!0&&t.tl5.play(0)},!1),document.addEventListener("fadeInItems",function(e){e.detail.source!==t.index&&t.isOpen===!0&&t.tl5.reverse()},!1),this.year.addEventListener("mouseenter",function(e){t.isOpen||(t.tl1.play(0),e.target.dispatchEvent(s))}),this.year.addEventListener("mouseleave",function(e){t.isOpen||(t.tl1.reverse(),e.target.dispatchEvent(a))}),this.year.addEventListener("click",function(e){e.target.classList?e.target.classList.add("active"):e.target.className+=" active",console.log(t.isOpen),t.isOpen=!0,t.tl2.play(0),e.target.dispatchEvent(i)})}},closeItem:function(){console.log("CLOSE"),this.isOpen=!1,this.tl4.play(0)},reset:function(){var t,e,i=this.guitarItem.children.length-1;for(this.tl1.invalidate(),this.tl2.invalidate(),this.tl3.invalidate(),this.tl4.invalidate(),this.tl5.invalidate(),this.tl1.pause(0,!0),this.tl2.pause(0,!0),this.tl3.pause(0,!0),this.tl4.pause(0,!0),this.tl5.pause(0,!0),this.tl1.kill(),this.tl2.kill(),this.tl3.kill(),this.tl4.kill(),this.tl5.kill(),this.tl1=null,this.tl2=null,this.tl3=null,this.tl4=null,this.tl5=null,this.tl1=new TimelineLite({paused:"true"}),this.tl2=new TimelineLite({paused:"true"}),this.tl3=new TimelineLite({paused:"true"}),this.tl4=new TimelineLite({paused:"true"}),this.tl5=new TimelineLite({paused:"true"}),this.fullHeight=0,this.smallHeight=0,this.guitarItem.removeAttribute("class"),this.guitarItem.removeAttribute("style"),t=this.guitarItem.cloneNode(!0),this.guitarItem.parentNode.replaceChild(t,this.guitarItem),this.guitarItem=t,t=this.year.cloneNode(!0),this.year.parentNode.replaceChild(t,this.year),this.year=t,this.year.children[0].classList?this.year.children[0].classList.remove("active"):this.year.children[0].className=this.year.children[0].className.replace(new RegExp("(^|\\b)"+"active".split(" ").join("|")+"(\\b|$)","gi")," "),i;i>=0;i--)e=this.guitarItem.children[i],e.removeAttribute("class"),e.removeAttribute("style"),t=e.cloneNode(!0),e.parentNode.replaceChild(t,e);this.mainData=[this.guitarItem.children[0],this.guitarItem.children[1]],this.extraData=[this.guitarItem.children[2],this.guitarItem.children[3]],this.i=this.mainData.length-1,this.j=this.extraData.length-1,this.isOpen=!1,this.year.className=""}};
!function(){"use strict";var t=function(t,n,o){t.items=[],t.layoutDone=function(){o(function(){animateAllTheThings(t.items),GuitarPlayerController()},0)};var a=function(n){angular.forEach(n.data,function(n){var o=new GuitarHistoryItem(n.title,n.date,n.description,n.image,n.interactiveGuitarName);t.items.push(o)})},e=function(t){console.log(t)};n.get("http://"+window.location.hostname+":3000/api/allData").then(a,e)},n=angular.module("app");n.controller("HistoryItemController",["$scope","$http","$timeout",t])}();
!function(){"use strict";var t=angular.module("app");t.directive("inlay",function(){return{restrict:"E",templateUrl:"directives/inlay"}})}();
!function(){"use strict";var e=angular.module("app");e.directive("repeatDone",function(){return function(e,n,t){e.$last&&e.$eval(t.repeatDone)}})}();
var GuitarHistoryItem=function(t,e,i,r,n){this.title=t,this.date=e,this.year=e.split(" ")[2],this.description=i,this.image=r,this.interactiveGuitarName=n};GuitarHistoryItem.prototype={get Title(){return this.title},get Date(){return this.date},get Year(){return this.year},get Description(){return this.description},get Image(){return this.image},get InteractiveGuitarName(){return this.interactiveGuitarName}};